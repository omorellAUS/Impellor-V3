# Impellor V3 Installation Instructions

## Prerequisites
- Windows 10 or later
- Git
- CMake (version 3.20 or later)
- Visual Studio 2022 (Community Edition or higher)
- vcpkg
- Python 3.8+ (for Fusion 360 add-in)
- Fusion 360

## Installation Steps

1. **Clone the Repository**
   ```bash
   git clone https://github.com/omorellAUS/Impellor-V3.git
   cd Impellor-V3
   ```

2. **Set Up vcpkg**
   ```bash
   git clone https://github.com/microsoft/vcpkg.git
   cd vcpkg
   .\bootstrap-vcpkg.bat
   .\vcpkg.exe install pcl[vtk,visualization,surface]:x64-windows-static opencascade:x64-windows-static nlohmann-json:x64-windows-static
   cd ..
   ```

3. **Configure and Build**
   ```bash
   cmake -B build -S . -CMAKE_TOOLCHAIN_FILE=./vcpkg/scripts/buildsystems/vcpkg.cmake -DVCPKG_TARGET_TRIPLET=x64-windows-static -DCMAKE_BUILD_TYPE=Release
   cmake --build build --config Release
   ```

4. **Run the Binary**
   ```bash
   mkdir output
   .\build\Release\fit.exe config.json
   ```

5. **Install Fusion 360 Add-in**
   - Copy the `fusion_addin` folder to Fusion 360's add-in directory.
   - Load the add-in from Fusion 360's Add-Ins panel.
   - Use the UI to select an input mesh and configure settings.

6. **Test with Sample Mesh**
   - Ensure `test.obj` is in the repository root (download a free impeller OBJ/STL with 8 blades if missing).
   - Update `config.json` with correct paths and parameters.

## Troubleshooting

- **vcpkg Install Fails**: Check internet, disk space (`dir`), and Visual Studio C++ tools.
- **CMake Errors**: Verify `vcpkg.cmake` path, ensure PCL/OpenCascade versions match.
- **fit.exe Crashes**: Check `test.obj` validity (contains vertices/faces, 8 blades) and `config.json` paths.
- **CI/CD Fails**: Review GitHub Actions logs for specific errors, ensure `test.obj` exists.
